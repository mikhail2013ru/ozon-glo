(()=>{"use strict";const t=t=>{const e=document.querySelector(".cart-wrapper");e.innerHTML="",0===t.length?e.insertAdjacentHTML("beforeend",'\n            <div id="cart-empty">\n                –í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø–æ–∫–∞ –ø—É—Å—Ç–∞\n            </div>\n        '):t.forEach((t=>{e.insertAdjacentHTML("beforeend",`\n                    <div class="card" data-key="${t.id}">\n                        ${t.sale?'<div class="card-sale">üî•Hot Saleüî•</div>':""}\n                        <div class="card-img-wrapper">\n                            <span class="card-img-top"\n                                style="background-image: url('${t.img}')"></span>\n                        </div>\n                        <div class="card-body justify-content-between">\n                            <div class="card-price">${t.price} ‚ÇΩ</div>\n                            <h5 class="card-title">${t.title}</h5>\n                            <button class="btn btn-primary">–£–¥–∞–ª–∏—Ç—å</button>\n                        </div>\n                    </div>\n            `)}))},e=()=>{const t=document.querySelector(".counter"),e=localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[];0!==e.length?t.textContent=e.length:t.textContent=0};var s=function(t){t.wrapper.classList.add("notify--fade"),setTimeout((function(){t.wrapper.classList.add("notify--fadeIn")}),100)},i=function(t){t.wrapper.classList.remove("notify--fadeIn"),setTimeout((function(){t.wrapper.remove()}),t.speed)},o=function(t){t.wrapper.classList.add("notify--slide"),setTimeout((function(){t.wrapper.classList.add("notify--slideIn")}),100)},n=function(t){t.wrapper.classList.remove("notify--slideIn"),setTimeout((function(){t.wrapper.remove()}),t.speed)},c=function(){function t(t){var e=this;this.notifyOut=function(t){t(e)};var s=t.status,i=t.type,o=void 0===i?1:i,n=t.title,c=t.text,a=t.showIcon,r=void 0===a||a,l=t.customIcon,d=void 0===l?"":l,p=t.customClass,h=void 0===p?"":p,u=t.speed,m=void 0===u?500:u,f=t.effect,v=void 0===f?"fade":f,y=t.showCloseButton,g=void 0===y||y,w=t.autoclose,L=void 0!==w&&w,S=t.autotimeout,I=void 0===S?3e3:S,x=t.gap,C=void 0===x?20:x,b=t.distance,E=void 0===b?20:b,k=t.position,O=void 0===k?"right top":k,M=t.customWrapper,T=void 0===M?"":M;this.customWrapper=T,this.status=s,this.title=n,this.text=c,this.showIcon=r,this.customIcon=d,this.customClass=h,this.speed=m,this.effect=v,this.showCloseButton=g,this.autoclose=L,this.autotimeout=I,this.gap=C,this.distance=E,this.type=o,this.position=O,this.checkRequirements()?(this.setContainer(),this.setWrapper(),this.setPosition(),this.showIcon&&this.setIcon(),this.showCloseButton&&this.setCloseButton(),this.setContent(),this.container.prepend(this.wrapper),this.setEffect(),this.notifyIn(this.selectedNotifyInEffect),this.autoclose&&this.autoClose(),this.setObserver()):console.error("You must specify 'title' or 'text' at least.")}return t.prototype.checkRequirements=function(){return!(!this.title&&!this.text)},t.prototype.setContainer=function(){var t=document.querySelector(".notifications-container");t?this.container=t:(this.container=document.createElement("div"),this.container.classList.add("notifications-container"),document.body.appendChild(this.container)),this.container.style.setProperty("--distance",this.distance+"px")},t.prototype.setPosition=function(){var t="notify-is-";"center"===this.position?this.container.classList.add(t+"center"):this.container.classList.remove(t+"center"),this.position.includes("left")?this.container.classList.add(t+"left"):this.container.classList.remove(t+"left"),this.position.includes("right")?this.container.classList.add(t+"right"):this.container.classList.remove(t+"right"),this.position.includes("x-center")?this.container.classList.add(t+"x-center"):this.container.classList.remove(t+"x-center"),this.position.includes("top")?this.container.classList.add(t+"top"):this.container.classList.remove(t+"top"),this.position.includes("bottom")?this.container.classList.add(t+"bottom"):this.container.classList.remove(t+"bottom"),this.position.includes("y-center")?this.container.classList.add(t+"y-center"):this.container.classList.remove(t+"y-center")},t.prototype.setCloseButton=function(){var t=this,e=document.createElement("div");e.classList.add("notify__close"),e.innerHTML='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="m8.94 8 4.2-4.193a.67.67 0 0 0-.947-.947L8 7.06l-4.193-4.2a.67.67 0 1 0-.947.947L7.06 8l-4.2 4.193a.667.667 0 0 0 .217 1.093.666.666 0 0 0 .73-.146L8 8.94l4.193 4.2a.665.665 0 0 0 .947 0 .665.665 0 0 0 0-.947L8.94 8Z" fill="currentColor"/></svg>',this.wrapper.appendChild(e),e.addEventListener("click",(function(){t.close()}))},t.prototype.setWrapper=function(){var t;this.customWrapper?this.wrapper=(t=this.customWrapper,(new DOMParser).parseFromString(t,"text/html").body.childNodes[0]):this.wrapper=document.createElement("div"),this.wrapper.style.setProperty("--gap",this.gap+"px"),this.wrapper.style.transitionDuration=this.speed+"ms",this.wrapper.classList.add("notify"),this.wrapper.classList.add("notify--type-"+this.type),this.wrapper.classList.add("notify--"+this.status),this.autoclose&&this.wrapper.style.setProperty("--timeout",""+(this.autotimeout+this.speed)),this.autoclose&&this.wrapper.classList.add("notify-autoclose"),this.customClass&&this.wrapper.classList.add(this.customClass)},t.prototype.setContent=function(){var t,e,s=document.createElement("div");s.classList.add("notify-content"),this.title&&((t=document.createElement("div")).classList.add("notify__title"),t.textContent=this.title,this.showCloseButton||(t.style.paddingRight="0")),this.text&&((e=document.createElement("div")).classList.add("notify__text"),e.innerHTML=this.text.trim(),this.title||(e.style.marginTop="0")),this.wrapper.appendChild(s),this.title&&s.appendChild(t),this.text&&s.appendChild(e)},t.prototype.setIcon=function(){var t=document.createElement("div");t.classList.add("notify__icon"),t.innerHTML=this.customIcon||function(t){switch(t){case"success":return'<svg height="32" width="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="m19.627 11.72-5.72 5.733-2.2-2.2a1.335 1.335 0 0 0-2.255.381 1.334 1.334 0 0 0 .375 1.5l3.133 3.146a1.333 1.333 0 0 0 1.88 0l6.667-6.667a1.334 1.334 0 1 0-1.88-1.893ZM16 2.667a13.333 13.333 0 1 0 0 26.666 13.333 13.333 0 0 0 0-26.666Zm0 24a10.666 10.666 0 1 1 0-21.333 10.666 10.666 0 0 1 0 21.333Z"/></svg>';case"warning":return'<svg height="32" width="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M13.666 15A1.333 1.333 0 0 0 15 13.667V8.334a1.333 1.333 0 0 0-2.665 0v5.333A1.333 1.333 0 0 0 13.666 15Zm-.507 5.227c.325.134.69.134 1.014 0 .164-.064.314-.159.44-.28a1.56 1.56 0 0 0 .28-.44c.075-.158.111-.332.106-.507a1.333 1.333 0 0 0-.386-.946 1.53 1.53 0 0 0-.44-.28A1.333 1.333 0 0 0 12.334 19a1.4 1.4 0 0 0 .386.947c.127.121.277.216.44.28ZM13.666 27a13.333 13.333 0 1 0 0-26.667 13.333 13.333 0 0 0 0 26.667Zm0-24a10.667 10.667 0 1 1 0 21.333 10.667 10.667 0 0 1 0-21.333Z"/></svg>';case"error":return'<svg height="32" width="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M16 2.667a13.333 13.333 0 1 0 0 26.666 13.333 13.333 0 0 0 0-26.666Zm0 24A10.667 10.667 0 0 1 5.333 16a10.56 10.56 0 0 1 2.254-6.533l14.946 14.946A10.56 10.56 0 0 1 16 26.667Zm8.413-4.134L9.467 7.587A10.56 10.56 0 0 1 16 5.333 10.667 10.667 0 0 1 26.667 16a10.56 10.56 0 0 1-2.254 6.533Z"/></svg>';case"info":return'<svg height="32" width="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M16 14.667A1.333 1.333 0 0 0 14.667 16v5.333a1.333 1.333 0 1 0 2.666 0V16A1.333 1.333 0 0 0 16 14.667Zm.507-5.227a1.333 1.333 0 0 0-1.014 0 1.334 1.334 0 0 0-.44.28c-.117.13-.212.278-.28.44a1.12 1.12 0 0 0-.106.507 1.333 1.333 0 0 0 .386.946c.13.118.279.213.44.28a1.333 1.333 0 0 0 1.84-1.226 1.4 1.4 0 0 0-.386-.947 1.334 1.334 0 0 0-.44-.28ZM16 2.667a13.333 13.333 0 1 0 0 26.666 13.333 13.333 0 0 0 0-26.666Zm0 24a10.666 10.666 0 1 1 0-21.333 10.666 10.666 0 0 1 0 21.333Z"/></svg>'}}(this.status),(this.status||this.customIcon)&&this.wrapper.appendChild(t)},t.prototype.setObserver=function(){var t=this,e=new IntersectionObserver((function(e){e[0].intersectionRatio<=0&&t.close()}),{threshold:0});setTimeout((function(){e.observe(t.wrapper)}),this.speed)},t.prototype.notifyIn=function(t){t(this)},t.prototype.autoClose=function(){var t=this;setTimeout((function(){t.close()}),this.autotimeout+this.speed)},t.prototype.close=function(){this.notifyOut(this.selectedNotifyOutEffect)},t.prototype.setEffect=function(){switch(this.effect){case"fade":default:this.selectedNotifyInEffect=s,this.selectedNotifyOutEffect=i;break;case"slide":this.selectedNotifyInEffect=o,this.selectedNotifyOutEffect=n}},t}();const a=t=>fetch("https://ozone-glo-70f5c-default-rtdb.firebaseio.com/goods.json?"+(t?`search=${t}`:"")).then((t=>{if(t.ok)return t.json();throw new Error("–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞")})).catch((t=>{new c({status:"error",title:"–û—à–∏–±–∫–∞!",text:t.message,effect:"slide",type:3,autoclose:!0})})),r=t=>{const e=document.querySelector(".goods");localStorage.setItem("goods",JSON.stringify(t)),e.innerHTML="",t.forEach((t=>{e.insertAdjacentHTML("beforeend",`\n            <div class="col-12 col-md-6 col-lg-4 col-xl-3">\n                <div class="card" data-key="${t.id}">\n                    ${t.sale?'<div class="card-sale">üî•Hot Saleüî•</div>':""}\n                    <div class="card-img-wrapper">\n                        <span class="card-img-top"\n                            style="background-image: url('${t.img}')"></span>\n                    </div>\n                    <div class="card-body justify-content-between">\n                        <div class="card-price">${t.price} ‚ÇΩ</div>\n                        <h5 class="card-title">${t.title}</h5>\n                        <button class="btn btn-primary">–í –∫–æ—Ä–∑–∏–Ω—É</button>\n                    </div>\n                </div>\n            </div>\n        `)}))},l=(t,e,s,i,o)=>t.filter((t=>{const n=!e.trim()||t.price>=parseInt(e),c=!s.trim()||t.price<=parseInt(s),a=!i||t.sale;return m.checked?n&&c&&a&&t.title.toLowerCase().includes(o.toLowerCase()):n&&c&&t.title.toLowerCase().includes(o.toLowerCase())})),d=()=>{const t=document.getElementById("min"),e=document.getElementById("max"),s=document.getElementById("discount-checkbox"),i=document.querySelector(".filter-check_checkmark"),o=document.querySelector(".search-wrapper_input"),n=((t,e=300)=>{let s;return(...i)=>{clearTimeout(s),s=setTimeout((()=>{t.apply(void 0,i)}),e)}})(((t="",e="",s=!1,i="")=>{a().then((o=>{r(l(o,t,e,s,i))}))}));return t.addEventListener("input",(()=>{n(t.value,e.value,s.value,o.value)})),e.addEventListener("input",(()=>{n(t.value,e.value,s.checked,o.value)})),s.addEventListener("input",(()=>{s.checked?i.classList.add("checked"):i.classList.remove("checked"),n(t.value,e.value,s.checked,o.value)})),{debounceFunc:n,priceMin:t,priceMax:e,check:s}},{debounceFunc:p,priceMin:h,priceMax:u,check:m}=d(),f=d;(()=>{const s=document.getElementById("cart"),i=document.querySelector(".cart"),o=i.querySelector(".cart-close"),n=i.querySelector(".cart-total > span"),c=i.querySelector(".cart-confirm"),a=document.querySelector(".goods"),r=document.querySelector(".cart-wrapper");s.addEventListener("click",(()=>{const e=localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[];i.style.display="flex",t(e),n.textContent=e.reduce(((t,e)=>t+e.price),0)})),o.addEventListener("click",(()=>{i.style.display=""})),a.addEventListener("click",(t=>{if(t.target.classList.contains("btn-primary")){const s=t.target.closest(".card").dataset.key,i=JSON.parse(localStorage.getItem("goods")),o=localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[],n=i.find((t=>t.id===+s));o.push(n),localStorage.setItem("cart",JSON.stringify(o)),e()}})),r.addEventListener("click",(s=>{if(s.target.classList.contains("btn-primary")){const i=localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[],o=s.target.closest(".card").dataset.key,c=i.findIndex((t=>t.id===+o));i.splice(c,1),localStorage.setItem("cart",JSON.stringify(i)),t(i),n.textContent=i.reduce(((t,e)=>t+e.price),0),e()}})),c.addEventListener("click",(()=>{const s=localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[];(t=>fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(t),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((t=>t.json())))(s).then((()=>{localStorage.removeItem("cart"),t([]),n.textContent=0,e()}))}))})(),a().then((t=>{r(t)})),(()=>{const t=document.querySelector(".search-wrapper_input");t.addEventListener("input",(()=>{p(h.value,u.value,m.value,t.value)}))})(),(()=>{const t=document.querySelector(".catalog-button > button"),e=document.querySelector(".catalog"),s=document.querySelectorAll(".catalog li");let i=!1;t.addEventListener("click",(()=>{i=!i,e.style.display=i?"block":""})),s.forEach((t=>{t.addEventListener("click",(()=>{const e=t.textContent;a().then((t=>{var s;r((s=e,t.filter((t=>t.category===s))))}))}))}))})(),f(),e()})();
//# sourceMappingURL=main.js.map